---
import { Image } from "astro:assets";
import Layout from "./Layout.astro";
import TagList from "../components/Utilities/TagList.astro";
import PDFLogo from "../icons/logos/PDFLogo.astro";
import Download from "../icons/ui/Download.astro";
import ContentDetails from "../components/Utilities/ContentDetails.astro";

const { frontmatter } = Astro.props;
const formattedDate = new Date(frontmatter.publishDate).toISOString().split("T")[0];
const showPDF = frontmatter.pdf !== "N/A";
const showDownload = frontmatter.download !== "N/A";
const showCard = showPDF || showDownload;
---

<Layout pageTitle={frontmatter.title} description={frontmatter.description}>
	<article class="container prose mx-auto max-w-4xl px-8 py-10">
		<div class="flex flex-col items-center">
			<h1 class="mb-0 max-w-2xl text-center text-3xl">{frontmatter.title}</h1>
			{
				showCard && (
					<div class="card mt-4 bg-base-300 p-2">
						<div class="flex flex-row flex-wrap justify-center gap-2 rounded-xl bg-base-100 p-2">
							{showPDF && (
								<a href={frontmatter.pdf} class="btn btn-error btn-sm h-auto">
									<PDFLogo size="24" />
									View Document
								</a>
							)}
							{showDownload && (
								<a href={frontmatter.pdf} class="btn btn-secondary btn-sm h-auto">
									<Download size="24" />
									Download PDF
								</a>
							)}
						</div>
					</div>
				)
			}
			<div class="gradient-card-bg my-4 max-w-lg rounded-2xl p-2 shadow-2xl">
				<div class="gradient-bg card my-0 max-w-full rounded-2xl bg-base-100 p-2 shadow-xl">
					<Image
						src={frontmatter.cover}
						alt={frontmatter.coverAlt}
						class="my-0 max-w-full rounded-2xl object-cover"
						loading="eager"
					/>
				</div>
			</div>
			<ContentDetails author={frontmatter.author} date={formattedDate} />
			<div class="card my-2 max-w-2xl bg-base-300 p-2">
				<div class="card bg-base-100 p-2">
					<TagList tags={frontmatter.tags} contentType="resources" />
				</div>
			</div>
			<hr class="mb-0 mt-10 w-full max-w-md border text-base-content" />
		</div>
		<slot />
	</article>
</Layout>
