---
import { Icon } from "astro-icon";

const { tags, contentType } = Astro.props;

interface TagStyle {
	displayText: string;
	btnClasses: string;
	icon?: string;
	iconClasses?: string;
}

interface TagStyles {
	[key: string]: TagStyle;
}

const tagStyles: TagStyles = {
	astro: {
		displayText: "Astro",
		btnClasses: "bg-[#3f4252] text-[#fff]",
		icon: "astro",
	},
	html: {
		displayText: "HTML",
		btnClasses: "bg-[#E34F26] text-[#fff]",
		icon: "simple-icons:html5",
	},
	javascript: {
		displayText: "JavaScript",
		btnClasses: "bg-[#F7DF1E] text-[#000]",
		icon: "simple-icons:javascript",
	},
	typescript: {
		displayText: "TypeScript",
		btnClasses: "bg-[#007ACC] text-[#fff]",
		icon: "simple-icons:typescript",
	},
	css: { displayText: "CSS", btnClasses: "bg-[#1572B6] text-[#fff]", icon: "simple-icons:css3" },
	python: {
		displayText: "Python",
		btnClasses: "bg-[#1572B6] text-[#fff]",
		icon: "simple-icons:python",
		iconClasses: "text-[#FFDD54]",
	},
};

function getUrlPrefix(contentType: string): string {
	switch (contentType) {
		case "projects":
			return "/portfolio/tags/";
		case "posts":
			return "/blog/tags/";
		case "resources":
			return "/resources/tags/";
		default:
			return "/blog/tags/"; // Default case
	}
}

function getTagDisplayAndClass(tag: string): TagStyle {
	const lowerCaseTag = tag.toLowerCase();
	return tagStyles[lowerCaseTag] || { displayText: tag, btnClasses: "btn-outline" };
}
---

<div class="my-6 flex flex-wrap justify-center gap-2" data-pagefind-ignore="all">
	{
		tags.map((tag: string) => {
			const { displayText, btnClasses, icon, iconClasses } = getTagDisplayAndClass(tag);
			const urlPrefix = getUrlPrefix(contentType);

			return (
				<a
					href={`${urlPrefix}${tag}`}
					class={`btn ${btnClasses} btn-sm capitalize ${
						iconClasses ? `text-[${iconClasses}]` : ""
					}`}
				>
					{icon && <Icon name={icon} class={`mr-0 h-4 w-4 ${iconClasses}`} />}
					{displayText}
				</a>
			);
		})
	}
</div>
<hr />
